<!DOCTYPE html>
<html>
    <head>
        <title>TalentOnCloud</title>

        <!-- jQuery 3.5.1 -->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

        <!-- BootStrap 3.3.7 -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

        <!-- ChartJs -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
        <script src="https://www.chartjs.org/samples/latest/utils.js"></script>

        <!-- Custom -->
        <style type="text/css">
            ::-webkit-scrollbar {
                width: 7px;
            }

            /* Track */
            ::-webkit-scrollbar-track {
                background: rgba(103, 3, 255, 1);
                /*box-shadow: inset 0 0 5px grey; */
                /*border-radius: 10px;*/
            }
             
            /* Handle */
            ::-webkit-scrollbar-thumb {
                background-color: rgba(0, 0, 0, 0.8);
                border-radius: 10px;
            }

            /* Handle on hover */
            ::-webkit-scrollbar-thumb:hover {
                /*background: #b30000; */
            }

            body
            {
                /*background-image: linear-gradient( 109.2deg,  rgba(254,3,104,1) 9.3%, rgba(103,3,255,1) 89.5% );*/
                background-size: cover;
                background-attachment: fixed;
            }

            .card
            {
                position: relative;
                margin: 0 5px 0 0px;
                background: rgba(255, 255, 255, 0.9);
                /*padding: 40px;*/
                box-sizing: border-box;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                border-radius: 3px;
            }
            .card .title
            {
                text-align: center;
                font-size: 20px;
                padding-bottom: 10px;
            }

            .sidebar .content a
            {
                text-decoration: none;
            }
            .sidebar .content ul
            {
                padding: 0;
                margin-top: 10px;
            }
            .sidebar .content li
            {
                list-style: none;
                text-align: center;
                padding: 7px 0 7px 0;
                cursor: pointer;
            }
            .sidebar .content li:hover
            {
                background-color: rgba(0, 0, 0, 0.2);
            }

            .users_table
            {
                padding: 0 10px;
            }
            .users_table th, .users_table td
            {
                text-align: center;
            }
            .users_table img
            {
                width: 40px;
                border-radius: 50%;
            }
            .users_table table .edit
            {
                outline: none;
                border: none;
                cursor: pointer;
                border-radius: 3px;
                background-color: rgba(34, 167, 240, 1);
                color: white;
                padding: 3px 12px;
                margin-right: 5px;
            }
            .users_table table .edit:hover
            {
                background-color: rgba(52, 152, 219, 1);
            }
            .users_table table .delete
            {
                outline: none;
                border: none;
                cursor: pointer;
                border-radius: 3px;
                background-color: rgba(240, 52, 52, 1);
                color: white;
                padding: 3px 12px;
                margin-left: 5px;
            }
            .users_table table .delete:hover
            {
                background-color: rgba(207, 0, 15, 1);
            }
        </style>

    </head>

    <body>
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>                        
              </button>
                    <a class="navbar-brand" href="index.html">TalentOnCloud</a>
                </div>
                <div class="collapse navbar-collapse" id="myNavbar">
                    <ul class="nav navbar-nav">
                        <li class="navclick"><a href="../index.html">Home</a></li>
                        <li class="active navclick"><a href="index.html">Dashboard</a></li>
                        <li class="navclick"><a href="#">Contact us</a></li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Admin<span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li class="navclick"><a href="#" data-toggle="modal" data-target="#myModal<?php echo $userdata['userid']; ?>">Profile</a></li>
                                <li class="navclick"><a href="../index.html">Logout</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-3" style="padding: 0;">
                    <div class="sidebar card">
                        <div class="title">Menu</div>
                        <div class="content">
                            <ul>
                                <a href="index.html"><li>Statistics</li></a>
                                <a href="users.html"><li>Users</li></a>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9">
                    <div class="card">
                        <div class="title">Users</div>
                        <div class="users_table">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Firstname</th>
                                        <th>Lastname</th>
                                        <th>Email</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- <tr>
                                        <td>1</td>
                                        <td>John</td>
                                        <td>Doe</td>
                                        <td>john@example.com</td>
                                        <td><button class="edit">Edit</button><button class="delete">Delete</button></td>
                                    </tr> -->
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">

              <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Modal Header</h4>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <h4 style="margin-bottom: 25px;"><center>Update Details</center></h4>
                            <form class="form-horizontal" action="/action_page.php">
                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="first_name">First Name:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="first_name" name="first_name">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="last_name">Last Name:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="last_name" name="last_name">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-sm-3" for="email">Email:</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="email" name="email">
                                    </div>
                                </div>
                                
                                <div class="form-group">  
                                <label class="control-label col-sm-3" for="email"></label>      
                                    <div class="col-sm-8">
                                        <button id="update" type="submit" class="btn btn-default">Update</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div> -->
                </div>
              
            </div>
        </div>

    </body>
</html>

<script>
    $(document).ready(function(){
        $.ajax({
            url: "https://reqres.in/api/users?per_page=100",
            type: "GET",
            success: function(res){

                var data = res.data;
                var n = res.data.length;
                for(i=0; i<n; i++)
                {
                    var html = '<tr> <td>'+data[i].id+'</td><td>'+data[i].first_name+'</td><td>'+data[i].last_name+'</td><td>'+data[i].email+'</td><td><button class="edit">Edit</button><button class="delete">Delete</button></td></tr>';
                    
                    $('.users_table table tbody').append(html);
                }
            }
        });
    });

    $(".users_table").on('click','.delete',function(){
        $(this).closest('tr').remove();
    });

    current_row = null;
    current_row_data = [];
    $(".users_table").on('click','.edit',function(){

        current_row_data = [];
        
        current_row = $(this).closest('tr')[0];

        var row_data = $(this).closest('tr')[0].innerHTML;
        // console.log(row_data);

        while(row_data != '')
        {
            current_row_data.push(row_data.substring(row_data.indexOf('<td>')+4, row_data.indexOf('</td>')));
            // console.log(row_data.substring(row_data.indexOf('<td>')+4, row_data.indexOf('</td>')));
            row_data = row_data.substring(row_data.indexOf('</td>')+5);
        
        }

        first_name = $('#first_name').val(current_row_data[1]);
        last_name = $('#last_name').val(current_row_data[2]);
        email = $('#email').val(current_row_data[3]);

        $('#myModal').modal('show');
    });


    $('#update').click(function (e){
        e.preventDefault();

        id = current_row_data[0];
        first_name = $('#first_name').val();
        last_name = $('#last_name').val();
        email = $('#email').val();


        html = '<td>'+id+'</td><td>'+first_name+'</td><td>'+last_name+'</td><td>'+email+'</td><td><button class="edit">Edit</button><button class="delete">Delete</button></td>';

        current_row.innerHTML = html;

        $('#myModal').modal('hide');
    });

</script>